"use strict";(self.webpackChunkSidemenu_Icon=self.webpackChunkSidemenu_Icon||[]).push([[368],{3368:(O,g,n)=>{n.r(g),n.d(g,{DriversModule:()=>E});var c=n(9808),d=n(4161),e=n(5e3),u=n(3713),f=n(2290),s=n(2382),p=n(8567);function _(i,o){1&i&&(e.TgZ(0,"div",17),e._uU(1," No Record Found "),e.qZA())}function Z(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"a",26),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).editDriver(l._id)}),e._UZ(11,"i",27),e.qZA(),e.TgZ(12,"a",28),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).deleteDriver(l._id)}),e._UZ(13,"i",29),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,3,t.firstName)),e.xp6(3),e.Oqu(e.lcZ(6,5,t.lastName)),e.xp6(3),e.Oqu(t.email)}}function b(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"pagination-controls",30),e.NdJ("pageChange",function(a){return e.CHM(t),e.oxw(2).driversData(a,1)}),e.qZA()}}const A=function(i,o,t){return{itemsPerPage:i,currentPage:o,totalItems:t}};function D(i,o){if(1&i&&(e.TgZ(0,"div",18)(1,"div",19)(2,"table",20)(3,"thead")(4,"tr")(5,"th",21),e._uU(6,"First name"),e.qZA(),e.TgZ(7,"th",21),e._uU(8,"Last name"),e.qZA(),e.TgZ(9,"th",22),e._uU(10,"Email address"),e.qZA(),e.TgZ(11,"th",23),e._uU(12,"Action"),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,Z,14,7,"tr",24),e.ALo(15,"paginate"),e.qZA()()(),e.YNc(16,b,1,0,"pagination-controls",25),e.qZA()),2&i){const t=e.oxw();e.xp6(14),e.Q6J("ngForOf",e.xi3(15,2,t.driversLists,e.kEZ(5,A,t.tableSize,t.page,t.count))),e.xp6(2),e.Q6J("ngIf",t.count>5)}}let T=(()=>{class i{constructor(t,r,a){this.apiService=t,this.toastr=r,this.router=a,this.driversLists=[],this.page=1,this.count=1,this.tableSize=5,this.pageSize=5,this.totalItems=5,this.tableSizes=[3,6,9,12],this.selectedAdminsData=""}ngOnInit(){this.driversData(1)}onSelected(t){this.selectedAdminsData=t,this.pageSize=parseInt(t),this.tableSize=parseInt(t),this.driversData(1)}driversData(t){this.page=t,this.apiService.getData(`drivers/getDriversdata?skip=${this.pageSize*(t-1)}&limit=${this.pageSize}`).subscribe(a=>{this.driversLists=a.item,this.count=a.totals},a=>{console.log("error inside",a)})}deleteDriver(t){this.apiService.deleteData(`drivers/deleteDriver/${t}`).subscribe(r=>{200===(null==r?void 0:r.responseCode)&&console.log("success")},r=>{console.log("error inside",r)},()=>{this.toastr.success("Successfully Deleted.","Success!"),this.driversData(event)})}editDriver(t){this.apiService.getData(`drivers/getDriverData/${t}`).subscribe(r=>{200===(null==r?void 0:r.responseCode)&&console.log("success")},r=>{console.log("error inside",r)},()=>{this.router.navigateByUrl(`/drivers/edit/${t}`)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.s),e.Y36(f._W),e.Y36(d.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-drivers-list"]],decls:26,vars:2,consts:[[1,"page-header"],[1,"page-leftheader"],[1,"page-title"],[1,"row","row-sm"],[1,"col-xl-12"],[1,"card"],[1,"card-header","pb-0"],["routerLink","/company/add","routerLinkActive","active",1,"btn","btn-primary"],["id","dtBasicExample_length",1,"dataTables_length","bs-select"],["name","dtBasicExample_length","aria-controls","dtBasicExample",1,"custom-select","custom-select-sm","form-control","form-control-sm","driverlist",3,"change"],["driverdata",""],["value","5"],["value","10"],["value","15"],["value","20"],["class","card-body recordInfo",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"card-body","recordInfo"],[1,"card-body"],[1,"table-responsive"],["id","myTable1",1,"table","text-md-nowrap"],[1,"wd-15p","border-bottom-0"],[1,"wd-20p","border-bottom-0"],[1,"wd-90p","border-bottom-0","action"],[4,"ngFor","ngForOf"],["class","planes-pagination","previousLabel","Prev","nextLabel","Next",3,"pageChange",4,"ngIf"],["title","edit",1,"edit",3,"click"],[1,"fe","fe-edit"],["title","remove",1,"delete",3,"click"],[1,"fe","fe-trash"],["previousLabel","Prev","nextLabel","Next",1,"planes-pagination",3,"pageChange"]],template:function(t,r){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Drivers List"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div")(9,"a",7),e._uU(10,"Add Company"),e.qZA()(),e.TgZ(11,"div",8)(12,"label"),e._uU(13,"Show entries "),e.TgZ(14,"select",9,10),e.NdJ("change",function(){e.CHM(a);const m=e.MAs(15);return r.onSelected(m.value)}),e.TgZ(16,"option",11),e._uU(17,"5"),e.qZA(),e.TgZ(18,"option",12),e._uU(19,"10"),e.qZA(),e.TgZ(20,"option",13),e._uU(21,"15"),e.qZA(),e.TgZ(22,"option",14),e._uU(23,"20"),e.qZA()()()()(),e.YNc(24,_,2,0,"div",15),e.YNc(25,D,17,9,"div",16),e.qZA()()()}2&t&&(e.xp6(24),e.Q6J("ngIf",0==(null==r.driversLists?null:r.driversLists.length)),e.xp6(1),e.Q6J("ngIf",(null==r.driversLists?null:r.driversLists.length)>0))},directives:[d.yS,d.Od,s.YN,s.Kr,c.O5,c.sg,p.LS],pipes:[p._s,c.rS],styles:[".edit[_ngcontent-%COMP%], .delete[_ngcontent-%COMP%]{color:#fff;border:2px;cursor:pointer}.recordInfo[_ngcontent-%COMP%]{color:red;display:flex;justify-content:center}a.edit[_ngcontent-%COMP%]{margin-right:10px}.card-header.pb-0[_ngcontent-%COMP%]{display:flex;justify-content:space-between}  .ngx-pagination .current{background:#0f034e!important}.form-control-sm[_ngcontent-%COMP%]{-webkit-appearance:auto!important;appearance:auto!important;padding:5px}"]}),i})();var x=n(4276),C=n(2313);function N(i,o){1&i&&(e.TgZ(0,"div",36),e._uU(1," Enter FirstName "),e.qZA())}function q(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,N,2,0,"div",35),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.driverRegisterForm.controls.firstName.errors.required)}}function F(i,o){1&i&&(e.TgZ(0,"div",36),e._uU(1," Enter LastName "),e.qZA())}function I(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,F,2,0,"div",35),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.driverRegisterForm.controls.lastName.errors.required)}}function U(i,o){1&i&&(e.TgZ(0,"div",36),e._uU(1," Email address is invalid "),e.qZA())}function y(i,o){1&i&&(e.TgZ(0,"div",36),e._uU(1," Email address is required "),e.qZA())}function w(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,U,2,0,"div",35),e.YNc(2,y,2,0,"div",35),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.driverRegisterForm.controls.email.errors?null:t.driverRegisterForm.controls.email.errors.email),e.xp6(1),e.Q6J("ngIf",t.driverRegisterForm.controls.email.errors.required)}}function L(i,o){1&i&&(e.TgZ(0,"div",36),e._uU(1," Password is required "),e.qZA())}function R(i,o){1&i&&(e.TgZ(0,"div",36),e._uU(1," Password must be at least 6 characters "),e.qZA())}function S(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,L,2,0,"div",35),e.YNc(2,R,2,0,"div",35),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.driverRegisterForm.controls.password.errors.required),e.xp6(1),e.Q6J("ngIf",t.driverRegisterForm.controls.password.errors.minlength)}}const v=function(i){return{"is-invalid":i}};function k(i,o){if(1&i&&(e.TgZ(0,"div",21)(1,"div",22)(2,"label",23),e._uU(3,"Password "),e.TgZ(4,"span",24),e._uU(5,"*"),e.qZA()(),e._UZ(6,"input",37),e.qZA(),e.YNc(7,S,3,2,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngClass",e.VKq(2,v,t.driverRegisterForm.controls.password.invalid&&(t.driverRegisterForm.controls.password.dirty||t.driverRegisterForm.controls.password.touched))),e.xp6(1),e.Q6J("ngIf",t.driverRegisterForm.controls.password.invalid&&(t.driverRegisterForm.controls.password.dirty||t.driverRegisterForm.controls.password.touched))}}let h=(()=>{class i{constructor(t,r,a,l,m,Y,Q){this.router=t,this.modalService=r,this.formBuilder=a,this.route=l,this.apiService=m,this.toastr=Y,this.titleService=Q,this.closeResult="",this.message="",this.errorMessage="",this.driverDetails={},this.error={name:"",message:""},this.hasError=!1,this.parentId=m.getUserDetails()._id}get form(){return this.driverRegisterForm.controls}ngOnInit(){this.route.params.subscribe(t=>{const r=t.id;this.updateid=r||null,r&&this.updateDriver(r)}),this.titleService.setTitle("JOA | Registration"),this.driverRegisterForm=this.formBuilder.group(null==this.updateid?{firstName:["",s.kI.compose([s.kI.required])],lastName:["",s.kI.compose([s.kI.required])],email:["",s.kI.compose([s.kI.required,s.kI.email,s.kI.minLength(6),s.kI.maxLength(320)])],password:["",s.kI.compose([s.kI.required,s.kI.minLength(3),s.kI.maxLength(100)])]}:{firstName:["",s.kI.compose([s.kI.required])],lastName:["",s.kI.compose([s.kI.required])],email:["",s.kI.compose([s.kI.required,s.kI.email,s.kI.minLength(3),s.kI.maxLength(320)])]})}clearErrorMessage(){this.errorMessage="",this.error={name:"",message:""}}validateForm(t,r){return 0===t.length?(this.errorMessage="please enter email id",!1):0===r.length?(this.errorMessage="please enter password",!1):r.length<6?(this.errorMessage="password should be at least 6 char",!1):(this.errorMessage="",!0)}addDriver(){console.log("panent id is",this.parentId),this.hasError=!1,this.apiService.postData("admins/addAdmin",{firstName:this.form.firstName.value,lastName:this.form.lastName.value,email:this.form.email.value,password:this.form.password.value,role:"Driver",parentId:this.parentId}).subscribe(r=>{200===r.responseCode&&this.toastr.success("Successfully registered.","Success!")},r=>{this.hasError=!0,this.toastr.error(r.error.responseMessage,"Error!"),console.log("error inside")},()=>{this.router.navigateByUrl("/drivers")})}updateDriverdata(){this.apiService.putData("drivers/patchDriver",{firstName:this.form.firstName.value,lastName:this.form.lastName.value,email:this.form.email.value,id:this.updateid}).subscribe(r=>{200===(null==r?void 0:r.responseCode)&&console.log("okkk",r)},r=>{this.hasError=!0,this.toastr.error(r.error.responseMessage,"Error!"),console.log("error",r)},()=>{this.toastr.success("Successfully updated.","Success!"),this.router.navigateByUrl("/drivers")})}updateDriver(t){this.apiService.getData(`drivers/getDriverData/${t}`).subscribe(r=>{this.driverRegisterForm.patchValue({firstName:r[0].firstName,lastName:r[0].lastName,email:r[0].email}),this.driverDetails=Object.assign({},r),200===r.responseCode&&console.log("success")},r=>{console.log("error inside",r)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.F0),e.Y36(x.FF),e.Y36(s.qu),e.Y36(d.gz),e.Y36(u.s),e.Y36(f._W),e.Y36(C.Dx))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-drivers"]],decls:61,vars:16,consts:[[1,"page-header"],[1,"page-leftheader"],[1,"page-title"],[1,"page-rightheader","ms-auto","d-lg-flex","d-none"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","javascript:void(0)",1,"d-flex"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 0 24 24","width","24",1,"svg-icon"],["d","M0 0h24v24H0V0z","fill","none"],["d","M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3zm5 15h-2v-6H9v6H7v-7.81l5-4.5 5 4.5V18z"],["d","M7 10.19V18h2v-6h6v6h2v-7.81l-5-4.5z","opacity",".3"],[1,"breadcrumb-icon"],["href","javascript:void(0)"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"col-sm-6","col-md-6"],[1,"mb-3"],[1,"form-label"],[1,"text-red"],["type","text","placeholder","First name","required","","autocomplete","on","formControlName","firstName",1,"form-control",3,"ngClass"],[4,"ngIf"],["type","text","name","lastName","autocomplete","off","placeholder","Enter Last Name","required","","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"col-md-12"],["type","email","placeholder","Email","autocomplete","off","placeholder","Enter Email","required","","formControlName","email",1,"form-control",3,"ngClass"],["class","col-sm-6 col-md-6",4,"ngIf"],[1,"form-footer","mt-2"],["type","submit",1,"btn","btn-primary","btn-block","px-2","btn-submit","d-flex",3,"disabled"],[1,"arrow","bounce"],[1,"fe","fe-arrow-right"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","password","name","password","placeholder","Password","autocomplete","off","required","","formControlName","password",1,"form-control",3,"ngClass"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Form-Elements"),e.qZA()(),e.TgZ(4,"div",3)(5,"ol",4)(6,"li",5)(7,"a",6),e.O4$(),e.TgZ(8,"svg",7),e._UZ(9,"path",8)(10,"path",9)(11,"path",10),e.qZA(),e.kcU(),e.TgZ(12,"span",11),e._uU(13," Home"),e.qZA()()(),e.TgZ(14,"li",5)(15,"a",12),e._uU(16,"Pages"),e.qZA()(),e.TgZ(17,"li",5)(18,"a",12),e._uU(19,"Elements"),e.qZA()(),e.TgZ(20,"li",13),e._uU(21,"Form-Elements"),e.qZA()()()(),e.TgZ(22,"div",14)(23,"div",15)(24,"div",16)(25,"div",17)(26,"h3",18),e._uU(27,"Drivers Details"),e.qZA()(),e.TgZ(28,"div",19)(29,"div",14)(30,"form",20),e.NdJ("ngSubmit",function(){return r.updateid?r.updateDriverdata():r.addDriver()}),e.TgZ(31,"div",21)(32,"div",22)(33,"label",23),e._uU(34,"First Name "),e.TgZ(35,"span",24),e._uU(36,"*"),e.qZA()(),e._UZ(37,"input",25),e.qZA(),e.YNc(38,q,2,1,"div",26),e.qZA(),e.TgZ(39,"div",21)(40,"div",22)(41,"label",23),e._uU(42,"Last Name "),e.TgZ(43,"span",24),e._uU(44,"*"),e.qZA()(),e._UZ(45,"input",27),e.qZA(),e.YNc(46,I,2,1,"div",26),e.qZA(),e.TgZ(47,"div",28)(48,"div",22)(49,"label",23),e._uU(50,"Email address"),e.TgZ(51,"span",24),e._uU(52,"*"),e.qZA()(),e._UZ(53,"input",29),e.qZA(),e.YNc(54,w,3,2,"div",26),e.qZA(),e.YNc(55,k,8,4,"div",30),e.TgZ(56,"div",31)(57,"button",32)(58,"div",33),e._UZ(59,"i",34),e.qZA(),e._uU(60),e.qZA()()()()()()()()),2&t&&(e.xp6(30),e.Q6J("formGroup",r.driverRegisterForm),e.xp6(7),e.Q6J("ngClass",e.VKq(10,v,r.driverRegisterForm.controls.firstName.invalid&&(r.driverRegisterForm.controls.firstName.dirty||r.driverRegisterForm.controls.firstName.touched))),e.xp6(1),e.Q6J("ngIf",r.driverRegisterForm.controls.firstName.invalid&&(r.driverRegisterForm.controls.firstName.dirty||r.driverRegisterForm.controls.firstName.touched)),e.xp6(7),e.Q6J("ngClass",e.VKq(12,v,r.driverRegisterForm.controls.lastName.invalid&&(r.driverRegisterForm.controls.lastName.dirty||r.driverRegisterForm.controls.lastName.touched))),e.xp6(1),e.Q6J("ngIf",r.driverRegisterForm.controls.lastName.invalid&&(r.driverRegisterForm.controls.lastName.dirty||r.driverRegisterForm.controls.lastName.touched)),e.xp6(7),e.Q6J("ngClass",e.VKq(14,v,r.driverRegisterForm.controls.email.invalid&&(r.driverRegisterForm.controls.email.dirty||r.driverRegisterForm.controls.email.touched))),e.xp6(1),e.Q6J("ngIf",r.driverRegisterForm.controls.email.invalid&&(r.driverRegisterForm.controls.email.dirty||r.driverRegisterForm.controls.email.touched)),e.xp6(1),e.Q6J("ngIf",!r.updateid),e.xp6(2),e.Q6J("disabled",r.driverRegisterForm.invalid),e.xp6(3),e.hij(" ",null===r.updateid?"Add":"Update"," "))},directives:[s._Y,s.JL,s.sg,s.Fj,s.Q7,s.JJ,s.u,c.mk,c.O5],styles:[".recordInfo[_ngcontent-%COMP%]{color:red;display:flex;justify-content:center}.btn-submit.d-flex[_ngcontent-%COMP%]{justify-content:center;margin-left:10px;height:40px}"]}),i})();const J=[{path:"",children:[{path:"add",component:h,data:{title:"Admins",breadcrumb:"Drivers"}},{path:"",component:T,data:{title:"Admins",breadcrumb:"Drivers"}},{path:"edit/:id",component:h,data:{title:"Admins",breadcrumb:"Drivers"}},{path:"**",redirectTo:"/admins"}]}];let M=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.Bz.forChild(J)],d.Bz]}),i})(),E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.ez,M,s.u5,s.UX,p.JX]]}),i})()}}]);